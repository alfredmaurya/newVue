(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{a2fe:function(t,i,o){"use strict";o.r(i);var e=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("visi-dialog",{attrs:{dialog:t.dialog,title:t.title,"show-footer":"",cardClass:"q-card-lg",beforeShow:t.beforeShow,loading:t.loading,onHide:t.onHide,onSubmit:t.onSubmit,submitting:t.submitting},scopedSlots:t._u([{key:"ScrollContent",fn:function(){return[o("div",{staticClass:"form q-pa-md"},[o("div",{staticClass:"row q-col-gutter-md"},[o("div",{staticClass:"col-12 col-md-12"},[o("div",{staticClass:"form-field q-pb-none"},[o("div",{staticClass:"alert bg-light-primary text-primary"},[t._v("\n              *Required Fields\n              ")])])]),o("div",{staticClass:"col-12 col-md-4"},[o("div",{staticClass:"form-field q-pb-none"},[o("q-select",{attrs:{outlined:"",label:"Select Location*","lazy-rules":"",options:t.locationOptions,rules:[t.$rules.required()],"option-label":"title","option-value":"id","emit-value":"","map-options":"","use-input":""},on:{filter:t.filterLocation,input:t.onLocationChange},scopedSlots:t._u([{key:"no-option",fn:function(){return[o("q-item",[o("q-item-section",{staticClass:"text-grey"},[t._v("\n                    No results\n                  ")])],1)]},proxy:!0}]),model:{value:t.detail.location_id,callback:function(i){t.$set(t.detail,"location_id",i)},expression:"detail.location_id"}})],1)]),o("div",{staticClass:"col-12 col-md-4"},[o("div",{staticClass:"form-field q-pb-none"},[o("q-select",{attrs:{outlined:"",label:"Select Park*","lazy-rules":"",options:t.parkOptions,rules:[t.$rules.required()],"option-label":"title","option-value":"id","emit-value":"","map-options":"","use-input":"",loading:t.loadingParks},on:{filter:t.filterPark,input:t.onParkChange},scopedSlots:t._u([{key:"no-option",fn:function(){return[o("q-item",[o("q-item-section",{staticClass:"text-grey"},[t._v("\n                    No results\n                  ")])],1)]},proxy:!0}]),model:{value:t.detail.park_id,callback:function(i){t.$set(t.detail,"park_id",i)},expression:"detail.park_id"}})],1)]),o("div",{staticClass:"col-12 col-md-4"},[o("div",{staticClass:"form-field q-pb-none"},[o("q-select",{attrs:{outlined:"",label:"Select Accommodation*","lazy-rules":"",options:t.accommodationOption,rules:[t.$rules.required()],"option-label":"title","option-value":"id","emit-value":"","map-options":"","use-input":"",loading:t.loadingAccommodation},on:{filter:t.filterAccommodation},scopedSlots:t._u([{key:"no-option",fn:function(){return[o("q-item",[o("q-item-section",{staticClass:"text-grey"},[t._v("\n                    No results\n                  ")])],1)]},proxy:!0}]),model:{value:t.detail.accommodation_id,callback:function(i){t.$set(t.detail,"accommodation_id",i)},expression:"detail.accommodation_id"}})],1)]),o("div",{staticClass:"col-12 col-md-12"},[o("div",{staticClass:"form-field q-pb-none"},[o("q-input",{attrs:{outlined:"",label:"Accommodation Type Name*","lazy-rules":"",rules:[t.$rules.required()]},model:{value:t.detail.title,callback:function(i){t.$set(t.detail,"title","string"===typeof i?i.trim():i)},expression:"detail.title"}})],1)]),o("div",{staticClass:"col-12 col-md-12"},[o("div",{staticClass:"form-field__area q-pb-none"},[o("q-input",{attrs:{outlined:"",label:"Description",type:"textarea",autogrow:""},model:{value:t.detail.description,callback:function(i){t.$set(t.detail,"description","string"===typeof i?i.trim():i)},expression:"detail.description"}})],1)]),o("div",{staticClass:"col-12 col-md-6"},[o("div",{staticClass:"form-field__area q-pb-none"},[o("q-input",{attrs:{outlined:"",label:"Rate*","lazy-rules":"",prefix:"$",mask:"#######",rules:[t.$rules.required()]},model:{value:t.detail.rate,callback:function(i){t.$set(t.detail,"rate","string"===typeof i?i.trim():i)},expression:"detail.rate"}})],1)]),o("div",{staticClass:"col-12 col-md-6"},[o("div",{staticClass:"form-field__area q-pb-none"},[o("q-input",{attrs:{outlined:"",label:"People*",mask:"#","lazy-rules":"",rules:[t.$rules.required()]},model:{value:t.detail.to_people,callback:function(i){t.$set(t.detail,"to_people","string"===typeof i?i.trim():i)},expression:"detail.to_people"}})],1)]),o("div",{staticClass:"col-12 col-md-12"},[o("div",{staticClass:"form-field q-pb-none"},[o("q-toggle",{attrs:{label:"Active","left-label":"","true-value":1,"false-value":0,"checked-icon":"check","unchecked-icon":"clear",size:"lg"},model:{value:t.detail.status,callback:function(i){t.$set(t.detail,"status",i)},expression:"detail.status"}})],1)])])])]},proxy:!0}])})},a=[],n=o("7037"),l=o.n(n),s=o("ded3"),c=o.n(s),d=(o("d3b7"),o("e6cf"),o("a79d"),o("4de4"),o("cca6"),o("2f62"));function r(){return{dialog:"AccommodationTypeForm",title:"Add Accommodation Type",detail:{location_id:"",park_id:"",accommodation_id:"",title:"",description:"",from_people:1,to_people:5,rate:"",status:1,max_people:5},loading:!1,submitting:!1,locationOptions:[],parkOptions:[],parks:{},loadingParks:!1,accommodationOption:[],loadingAccommodation:!1,accommodation:{}}}var p={name:"AccommodationTypeForm",data:r,computed:c()(c()({},Object(d["b"])("common",["locations"])),{},{properties:function(){return this.getDialogProperties(this.dialog)}}),methods:{onLocationChange:function(t){var i=this;if(this.detail.park_id="",this.parks[t])return this.parks[t];this.loadingParks=!0,this.$store.dispatch("parks/getListing",{pagination:0,location_id:t}).then((function(o){o.status&&o.data&&(i.parks[t]=o.data,i.parkOptions=o.data)})).finally((function(){i.loadingParks=!1}))},onParkChange:function(t){var i=this;if(this.detail.accommodation_id="",this.accommodation[t])return this.accommodation[t];this.loadingAccommodation=!0,this.$store.dispatch("accommodation/getListing",{pagination:0,park_id:t}).then((function(o){o.status&&o.data&&(i.accommodation[t]=o.data),i.accommodationOption=o.data})).finally((function(){i.loadingAccommodation=!1}))},filterLocation:function(t,i){var o=this;i(""!==t?function(){var i=t.toLowerCase();o.locationOptions=o.locations.filter((function(t){return t.title.toLowerCase().indexOf(i)>-1}))}:function(){o.locationOptions=o.locations})},filterPark:function(t,i){var o=this,e=this.parks[this.detail.location_id]||[];i(""!==t?function(){var i=t.toLowerCase();o.parkOptions=e.filter((function(t){return t.title.toLowerCase().indexOf(i)>-1}))}:function(){o.parkOptions=e})},filterAccommodation:function(t,i){var o=this,e=this.accommodation[this.detail.park_id]||[];i(""!==t?function(){var i=t.toLowerCase();o.accommodationOption=e.filter((function(t){return t.title.toLowerCase().indexOf(i)>-1}))}:function(){o.accommodationOption=e})},beforeShow:function(){var t=this;this.locationOptions=this.locations,this.properties.id&&(this.loading=!0,this.title="Edit Accommodation Type",this.$store.dispatch("accommodationType/detailById",this.properties.id).then((function(i){i.status&&i.data&&(t.detail=i.data,t.detail.rule?t.priceRule=t.detail.rule:t.priceRule=[{days:"",rate:""}],t.onLocationChange(t.detail.location_id),t.detail&&t.detail.park&&(t.detail.park_id=t.detail.park.id),t.onParkChange(t.detail.park_id),t.detail&&t.detail.accommodation&&(t.detail.accommodation_id=t.detail.accommodation.id))})).finally((function(){t.loading=!1})))},onHide:function(){Object.assign(this.$data,r())},onSubmit:function(){var t=this;this.submitting=!0;var i=c()(c()({},this.detail),{},{priceRule:this.priceRule});i.max_people=i.to_people,this.$store.dispatch("accommodationType/addUpdate",i).then((function(i){if(i.status)t.updateDialogState({dialog:"AccommodationTypeForm",val:!1}),t.showSuccess(i.message);else if(i.message)if("object"===l()(i.message))for(var o in i.message)t.showError(i.message[o]);else("string"===typeof i.message||i.message instanceof String)&&t.showError(i.message)})).finally((function(){t.submitting=!1}))}}},u=p,m=o("2877"),f=o("f09f"),g=o("ddd8"),h=o("66e5"),v=o("4074"),k=o("27f9"),b=o("1c1c"),_=o("9c40"),y=o("0016"),C=o("9564"),q=o("eebe"),x=o.n(q),w=Object(m["a"])(u,e,a,!1,null,null,null);i["default"]=w.exports;x()(w,"components",{QCard:f["a"],QSelect:g["a"],QItem:h["a"],QItemSection:v["a"],QInput:k["a"],QList:b["a"],QBtn:_["a"],QIcon:y["a"],QToggle:C["a"]})}}]);