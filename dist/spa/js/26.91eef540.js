(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[26],{"1a59":function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("visi-dialog",{attrs:{dialog:e.dialog,title:e.title,"show-footer":"",cardClass:"q-card-md",beforeShow:e.beforeShow,loading:e.loading,onHide:e.onHide,onSubmit:e.onSubmit,submitting:e.submitting},scopedSlots:e._u([{key:"ScrollContent",fn:function(){return[e.detail?i("div",{staticClass:"form q-pa-md"},[i("div",{staticClass:"row q-col-gutter-md"},[i("div",{staticClass:"col-12 col-md-12"},[i("div",{staticClass:"form-field q-pb-none"},[i("div",{staticClass:"alert bg-light-primary text-primary"},[e._v("\n              *Required Fields\n              ")])])]),i("div",{staticClass:"col-12 col-md-12"},[i("div",{staticClass:"form-field q-pb-none"},[i("q-input",{attrs:{outlined:"",label:"Role Name*","lazy-rules":"",rules:[e.$rules.required()]},model:{value:e.detail.role_name,callback:function(t){e.$set(e.detail,"role_name","string"===typeof t?t.trim():t)},expression:"detail.role_name"}})],1)]),i("div",{staticClass:"col-12 col-md-12"},[i("div",{staticClass:"form-field__area q-pb-none"},[i("q-input",{attrs:{outlined:"",label:"Description",type:"textarea",autogrow:""},model:{value:e.detail.description,callback:function(t){e.$set(e.detail,"description","string"===typeof t?t.trim():t)},expression:"detail.description"}})],1)]),i("div",{staticClass:"col-12 col-md-12"},[i("div",{staticClass:"form-field q-pb-none"},[i("q-toggle",{attrs:{label:"Active","left-label":"","true-value":1,"false-value":0,"checked-icon":"check","unchecked-icon":"clear",size:"lg"},model:{value:e.detail.status,callback:function(t){e.$set(e.detail,"status",t)},expression:"detail.status"}})],1)]),i("div",{staticClass:"col-12 col-md-6"},[i("h3",{staticClass:"text-subtitle2 text-dark q-my-none"},[e._v("Permissions")])]),i("div",{staticClass:"col-12 col-md-6 text-right"},[i("q-toggle",{attrs:{label:"Allow All","left-label":"","checked-icon":"check","unchecked-icon":"clear","true-value":1,"false-value":0},model:{value:e.detail.allow_everything,callback:function(t){e.$set(e.detail,"allow_everything",t)},expression:"detail.allow_everything"}})],1),i("div",{staticClass:"col-6 col-md-6"},[i("q-input",{ref:"filter",attrs:{filled:"",label:"Search",disable:!!e.detail.allow_everything},scopedSlots:e._u([{key:"append",fn:function(){return[""!==e.filter?i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"clear"},on:{click:e.resetFilter}}):e._e()]},proxy:!0}],null,!1,1235574481),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),i("div",{staticClass:"col-12 col-md-12"},[i("q-tree",{attrs:{nodes:e.permissions,filter:e.filter,"filter-method":e.myFilterMethod,"node-key":"code","label-key":"title","children-key":"permission","tick-strategy":"leaf",ticked:e.detail.permission,expanded:e.expanded,"no-nodes-label":"No Permissions Available",accordion:"",disabled:!!e.detail.allow_everything},on:{"update:ticked":function(t){return e.$set(e.detail,"permission",t)},"update:expanded":function(t){e.expanded=t}}})],1)])]):e._e()]},proxy:!0}])})},a=[],s=i("7037"),o=i.n(s),n=i("ded3"),r=i.n(n),d=(i("4de4"),i("d3b7"),i("e6cf"),i("a79d"),i("d81d"),i("cca6"),i("2f62"));function c(){return{dialog:"RoleForm",title:"Add Role",detail:{role_name:"",status:1,permission:[],allow_everything:0},expanded:[],loading:!1,submitting:!1,filter:""}}var u={name:"RoleForm",data:c,computed:r()(r()({},Object(d["b"])("roles",["permissions"])),{},{properties:function(){return this.getDialogProperties(this.dialog)}}),methods:{resetFilter:function(){this.filter="",this.$refs.filter.focus()},myFilterMethod:function(e,t){var i=t.toLowerCase();return e.title&&e.title.toLowerCase().indexOf(i)>-1},beforeShow:function(){var e=this;this.properties.id&&(this.title="Edit Role",this.loading=!0,this.$store.dispatch("roles/detailById",this.properties.id).then((function(t){if(t.status&&t.data){var i=t.data;i.permission=i.permission.map((function(e){return e.permission_id})),e.detail=i}else e.updateDialogState({dialog:e.dialog,val:!1})})).finally((function(){e.loading=!1})))},onHide:function(){Object.assign(this.$data,c())},onSubmit:function(){var e=this;this.submitting=!0,this.$store.dispatch("roles/addUpdate",this.detail).then((function(t){if(t.status)e.updateDialogState({dialog:"RoleForm",val:!1}),e.showSuccess(t.message);else if(t.message)if("object"===o()(t.message))for(var i in t.message)e.showError(t.message[i]);else("string"===typeof t.message||t.message instanceof String)&&e.showError(t.message)})).finally((function(){e.submitting=!1}))}}},f=u,m=i("2877"),p=i("f09f"),g=i("27f9"),h=i("9564"),v=i("0016"),b=i("7f41"),y=i("eebe"),w=i.n(y),k=Object(m["a"])(f,l,a,!1,null,null,null);t["default"]=k.exports;w()(k,"components",{QCard:p["a"],QInput:g["a"],QToggle:h["a"],QIcon:v["a"],QTree:b["a"]})}}]);