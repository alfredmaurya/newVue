(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[30],{d9b52:function(e,a,t){"use strict";t.r(a);var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("q-page",{style:e.isMobile?"":"padding-top: 70px"},[e.isMobile?e._e():t("q-page-sticky",{attrs:{expand:"",position:"top"}},[t("q-toolbar",{staticClass:"bg-white text-dark q-pa-none",attrs:{inset:""}},[t("q-toolbar-title",{staticClass:"text-dark col-auto q-pa-sm"},[e._v("\n        Accommodation Type\n      ")]),t("q-breadcrumbs",{staticClass:"text-grey col-auto",attrs:{gutter:"sm",separator:"/"}},[t("q-breadcrumbs-el",{attrs:{label:"Dashboard",to:{name:"Homepage"}}}),t("q-breadcrumbs-el",{attrs:{label:"Accommodation Type"}})],1),t("div",{staticClass:"breadcrumb-filters ml-auto flex q-mr-xs"},[e.hasPermission("accommodation_type_add")?t("q-btn",{attrs:{unelevated:"",color:"primary",padding:"5px 15px 5px 10px",size:"11px"},on:{click:function(a){return e.updateDialogState({dialog:"AccommodationTypeForm",val:!0})}}},[t("q-icon",{staticClass:"q-mr-xs",attrs:{name:"add"}}),e._v("Add\n        ")],1):e._e()],1)],1)],1),t("div",{staticClass:"container q-pa-lg"},[e.hasPermission("accommodation_type_view")?t("visi-grid",{ref:"accommodationTypeGrid",attrs:{title:"Accommodation Type","global-search":"",fullscreen:"",data:e.listing,columns:e.columns,loading:e.loading,onRequest:e.onRequest,pagination:e.pagination,rowKey:"id",classes:"table-theme",resetPagination:e.resetPagination,"choose-columns":"","show-refresh":""},scopedSlots:e._u([{key:"body-cell-Action",fn:function(a){return[t("q-btn-dropdown",{staticClass:"action-dropdown ddropdown",attrs:{padding:"5px",flat:"",icon:"more_vert"}},[t("q-list",{staticClass:"dropdown-sm action-dropdown-box"},[t("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",to:{name:"AccommodationType",params:{id:a.row.id}}}},[t("q-item-section",[t("q-item-label",[t("q-icon",{staticClass:"q-mr-xs",attrs:{name:"visibility",size:"15px"}}),e._v("\n                  View\n                ")],1)],1)],1),e.hasPermission("accommodation_type_edit")?t("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.updateDialogState({dialog:"AccommodationTypeForm",val:!0,properties:a.row,refresh:!0})}}},[t("q-item-section",[t("q-item-label",[t("q-icon",{staticClass:"q-mr-xs",attrs:{name:"edit",size:"15px"}}),e._v("\n                  Edit\n                ")],1)],1)],1):e._e(),e.hasPermission("accommodation_type_delete")?t("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.confirmDelete(a.row)}}},[t("q-item-section",[t("q-item-label",[t("q-icon",{staticClass:"q-mr-xs",attrs:{name:"delete",size:"15px"}}),e._v("\n                  Delete\n                ")],1)],1)],1):e._e()],1)],1)]}},{key:"body-cell-rate",fn:function(a){return[e._v("\n        "+e._s(e._f("currency")(a.row.rate))+"\n      ")]}},{key:"body-cell-employee",fn:function(a){return[a.row.employee?t("div",{staticClass:"address-column"},[t("p",[e._v("\n            "+e._s(a.row.employee.first_name+" "+a.row.employee.last_name)+"\n          ")])]):[e._v("\n          "+e._s(e.noDataPlaceHolder)+"\n        ")]]}},{key:"body-cell-location",fn:function(a){return[a.row.location?[t("router-link",{attrs:{to:{name:"Locations",params:{id:a.row.location.id}}}},[e._v("\n            "+e._s(a.row.location.title)+"\n          ")])]:[e._v("\n          "+e._s(e.noDataPlaceHolder)+"\n        ")]]}},{key:"body-cell-park",fn:function(a){return[a.row.park?[e._v("\n          "+e._s(a.row.park.title)+"\n        ")]:[e._v("\n          "+e._s(e.noDataPlaceHolder)+"\n        ")]]}},{key:"body-cell-accommodation",fn:function(a){return[a.row.accommodation?[e._v("\n          "+e._s(a.row.accommodation.title)+"\n        ")]:[e._v("\n          "+e._s(e.noDataPlaceHolder)+"\n        ")]]}},{key:"body-cell-status",fn:function(a){return[t("q-badge",{class:e.statues[a.row.status].class},[e._v("\n          "+e._s(e.statues[a.row.status].status)+"\n        ")])]}},{key:"body-cell-created_at",fn:function(a){return[e._v("\n        "+e._s(e._f("formatDate")(a.row.created_at,"H:mm A, MMM DD, YYYY"))+"\n      ")]}}],null,!1,2580755013)}):e._e()],1),e.hasPermission(["accommodation_type_add","accommodation_type_edit"])?t("Form"):e._e(),t("Detail")],1)},i=[],n=t("ded3"),s=t.n(n),r=(t("e260"),t("d3b7"),t("e6cf"),t("3ca3"),t("ddb0"),t("4de4"),t("a79d"),t("2f62")),l={name:"PageAccommodationType",computed:s()(s()({},Object(r["b"])("accommodationType",["pagination","listing"])),{},{localPagination:function(){return this.pagination}}),components:{Form:function(){return t.e(11).then(t.bind(null,"a2fe"))},Detail:function(){return t.e(10).then(t.bind(null,"55b4"))}},data:function(){return{loading:!1,refreshOrdersData:!this.$q.platform.is.mobile,columns:[{name:"title",label:"Type Name",field:"title",align:"left",sortable:!0,isVisible:!0,isFixed:!0,detailLink:{name:"AccommodationType"}},{name:"Action",label:"Action",align:"left",isVisible:!0,isFixed:!0},{name:"rate",label:"rate",field:"rate",align:"left",isVisible:!0,isFixed:!0},{name:"location",label:"Location",field:"location",align:"left",isVisible:!0},{name:"park",label:"park",field:"park",align:"left",isVisible:!0},{name:"accommodation",label:"Accommodation",field:"accommodation",align:"left",isVisible:!0},{name:"status",label:"status",field:"status",align:"left",isVisible:!0},{name:"created_at",label:"Created At",align:"left",field:"created_at",isVisible:!0,sortable:!0},{name:"employee",label:"Created By",field:"employee",align:"left",isVisible:!0}]}},methods:{onRequest:function(e){var a=this;this.loading=!0;var t={"page[number]":e.pagination.page||1,"page[size]":e.pagination.rowsPerPage||this.localPagination.rowsPerPage,search:e.filter,pagination:1};e.pagination&&e.pagination.sortBy&&(t.Sorts=e.pagination.sortBy,t.SortsType=e.pagination.descending?"desc":"asc"),this.$store.dispatch("accommodationType/getListing",t).then((function(o){o&&o.status&&(a.$store.commit("accommodationType/SET_LISTING",{listing:o&&o.data&&o.data.data?o.data.data:[],refresh:!(!t||1!==t.Page)||a.refreshOrdersData}),a.$store.commit("accommodationType/UPDATE_PAGINATION",{page:o.data.current_page,rowsPerPage:o.data.per_page,rowsNumber:o.data.total,hasNext:!!o.data.next_page_url,sortBy:e.pagination&&e.pagination.sortBy||null,descending:e.pagination&&e.pagination.descending||!1}))})).finally((function(){a.loading=!1}))},resetPagination:function(){this.$store.commit("accommodationType/UPDATE_PAGINATION",this.defaultPagination)},confirmDelete:function(e){var a=this;this.visiConfirm('Are you sure you want to delete "'.concat(e.title,'" Accommodation Type')).onOk((function(){a.$store.dispatch("accommodationType/deleteById",e.id).then((function(e){e.status?(a.$refs.accommodationTypeGrid&&a.$refs.accommodationTypeGrid.refresh(),a.showSuccess(e.message)):e.message&&a.showError(e.message)}))}))}},created:function(){this.$store.dispatch("common/getAllLocation"),this.$route.params.id&&this.updateDialogState({dialog:"AccommodationTypeDetail",val:!0,properties:{id:this.$route.params.id}})},beforeRouteUpdate:function(e,a,t){e.params.id&&this.updateDialogState({dialog:"AccommodationTypeDetail",val:!0,properties:{id:e.params.id}}),t()}},c=l,d=t("2877"),m=t("9989"),p=t("de5e"),u=t("65c6"),f=t("6ac5"),g=t("ead5"),b=t("079eb"),y=t("9c40"),_=t("0016"),h=t("f20b"),w=t("1c1c"),v=t("66e5"),q=t("4074"),T=t("0170"),P=t("58a81"),k=t("7f67"),x=t("eebe"),A=t.n(x),D=Object(d["a"])(c,o,i,!1,null,null,null);a["default"]=D.exports;A()(D,"components",{QPage:m["a"],QPageSticky:p["a"],QToolbar:u["a"],QToolbarTitle:f["a"],QBreadcrumbs:g["a"],QBreadcrumbsEl:b["a"],QBtn:y["a"],QIcon:_["a"],QBtnDropdown:h["a"],QList:w["a"],QItem:v["a"],QItemSection:q["a"],QItemLabel:T["a"],QBadge:P["a"]}),A()(D,"directives",{ClosePopup:k["a"]})}}]);