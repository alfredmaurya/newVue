(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[34],{"26f8":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{style:e.isMobile?"":"padding-top: 70px"},[e.isMobile?e._e():a("q-page-sticky",{attrs:{expand:"",position:"top"}},[a("q-toolbar",{staticClass:"bg-white text-dark q-pa-none",attrs:{inset:""}},[a("q-toolbar-title",{staticClass:"text-dark col-auto q-pa-sm"},[e._v("\n        Employees\n      ")]),a("q-breadcrumbs",{staticClass:"text-grey col-auto",attrs:{gutter:"sm",separator:"/"}},[a("q-breadcrumbs-el",{attrs:{label:"Dashboard",to:{name:"Homepage"}}}),a("q-breadcrumbs-el",{attrs:{label:"Employees"}})],1),a("div",{staticClass:"breadcrumb-filters ml-auto flex q-mr-xs"},[e.hasPermission("employee_add")?a("q-btn",{attrs:{unelevated:"",color:"primary",padding:"5px 15px 5px 10px",size:"11px"},on:{click:function(t){return e.updateDialogState({dialog:"EmployeeForm",val:!0})}}},[a("q-icon",{staticClass:"q-mr-xs",attrs:{name:"add"}}),e._v("Add")],1):e._e()],1)],1)],1),a("div",{staticClass:"container q-pa-lg"},[a("visi-grid",{ref:"employeeGrid",attrs:{title:"Employees","global-search":"",fullscreen:"",data:e.listing,columns:e.columns,loading:e.loading,onRequest:e.onRequest,pagination:e.pagination,rowKey:"id",classes:"table-theme",resetPagination:e.resetPagination,"choose-columns":"","show-refresh":""},scopedSlots:e._u([{key:"body-cell-first_name",fn:function(t){return[a("div",{staticClass:"column-dropdown"},[a("q-list",[a("q-item",{staticClass:"q-pa-none no-hover",attrs:{clickable:"",to:{name:"Employee",params:{id:t.row.id}}}},[a("Avtar",{attrs:{userName:t.row.first_name+" "+t.row.last_name,size:"35px",avtar:""}}),a("q-item-section",[a("q-item-label",[a("strong",[e._v("\n                    "+e._s(t.row.first_name)+" "+e._s(t.row.last_name)+"\n                  ")])]),a("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.row.email))])],1)],1)],1)],1)]}},{key:"body-cell-role",fn:function(t){return[e._v("\n        "+e._s(t.row.role&&t.row.role.role_name||e.noDataPlaceHolder)+"\n      ")]}},{key:"body-cell-status",fn:function(t){return[a("q-badge",{class:e.statues[t.row.status].class},[e._v("\n          "+e._s(e.statues[t.row.status].status)+"\n        ")])]}},{key:"body-cell-created_at",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDate")(t.row.created_at,"H:mm A, MMM DD, YYYY"))+"\n      ")]}},{key:"body-cell-Action",fn:function(t){return[a("q-btn-dropdown",{staticClass:"action-dropdown ddropdown",attrs:{padding:"5px",flat:"",icon:"more_vert"}},[a("q-list",{staticClass:"dropdown-sm action-dropdown-box"},[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",to:{name:"Employee",params:{id:t.row.id}}}},[a("q-item-section",[a("q-item-label",[a("q-icon",{staticClass:"q-mr-xs",attrs:{name:"visibility",size:"15px"}}),e._v("\n                  View\n                ")],1)],1)],1),e.hasPermission("employee_edit")?a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(a){return e.updateDialogState({dialog:"EmployeeForm",val:!0,properties:t.row,refresh:!0})}}},[a("q-item-section",[a("q-item-label",[a("q-icon",{staticClass:"q-mr-xs",attrs:{name:"edit",size:"15px"}}),e._v("\n                  Edit\n                ")],1)],1)],1):e._e(),e.hasPermission("employee_delete")?a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(a){return e.confirmDelete(t.row)}}},[a("q-item-section",[a("q-item-label",[a("q-icon",{staticClass:"q-mr-xs",attrs:{name:"delete",size:"15px"}}),e._v("\n                  Delete\n                ")],1)],1)],1):e._e()],1)],1)]}}])})],1),e.hasPermission(["employee_add","employee_edit"])?a("Form"):e._e(),a("Detail")],1)},s=[],o=a("ded3"),n=a.n(o),l=(a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),a("4de4"),a("a79d"),a("2f62")),r={name:"PageEmployee",computed:n()(n()({},Object(l["b"])("employee",["pagination","listing"])),{},{localPagination:function(){return this.pagination}}),components:{Form:function(){return a.e(17).then(a.bind(null,"68d1"))},Detail:function(){return a.e(16).then(a.bind(null,"38e0"))}},data:function(){return{loading:!1,refreshOrdersData:!this.$q.platform.is.mobile,columns:[{name:"first_name",label:"First Name",field:"first_name",align:"left",sortable:!0,isVisible:!0,isFixed:!0},{name:"Action",label:"Action",align:"left",isVisible:!0,isFixed:!0},{name:"mobile",label:"Phone",field:"mobile",align:"left",isVisible:!0},{name:"role",label:"Role",field:"role",align:"left",isVisible:!0},{name:"status",label:"status",field:"status",align:"left",isVisible:!0},{name:"created_at",label:"Created At",align:"left",field:"created_at",isVisible:!0,sortable:!0}]}},methods:{onRequest:function(e){var t=this;this.loading=!0;var a={"page[number]":e.pagination.page||1,"page[size]":e.pagination.rowsPerPage||this.localPagination.rowsPerPage,search:e.filter,pagination:1};e.pagination&&e.pagination.sortBy&&(a.Sorts=e.pagination.sortBy,a.SortsType=e.pagination.descending?"desc":"asc"),this.$store.dispatch("employee/getListing",a).then((function(i){i&&i.status&&(t.$store.commit("employee/SET_LISTING",{listing:i&&i.data&&i.data.data?i.data.data:[],refresh:!(!a||1!==a.Page)||t.refreshOrdersData}),t.$store.commit("employee/UPDATE_PAGINATION",{page:i.data.current_page,rowsPerPage:i.data.per_page,rowsNumber:i.data.total,hasNext:!!i.data.next_page_url,sortBy:e.pagination&&e.pagination.sortBy||null,descending:e.pagination&&e.pagination.descending||!1}))})).finally((function(){t.loading=!1}))},resetPagination:function(){this.$store.commit("employee/UPDATE_PAGINATION",this.defaultPagination)},confirmDelete:function(e){var t=this;this.visiConfirm('Are you sure you want to delete "'.concat(e.first_name,'" Employee')).onOk((function(){t.$store.dispatch("employee/deleteById",e.id).then((function(e){e.status?(t.$refs.employeeGrid&&t.$refs.employeeGrid.refresh(),t.showSuccess(e.message)):e.message&&t.showError(e.message)}))}))}},created:function(){this.$store.dispatch("common/getAllRoles"),this.$route.params.id&&this.updateDialogState({dialog:"EmployeeDetail",val:!0,properties:{id:this.$route.params.id}})},beforeRouteUpdate:function(e,t,a){e.params.id&&this.updateDialogState({dialog:"EmployeeDetail",val:!0,properties:{id:e.params.id}}),a()}},c=r,d=a("2877"),m=a("9989"),p=a("de5e"),u=a("65c6"),g=a("6ac5"),f=a("ead5"),b=a("079eb"),y=a("9c40"),_=a("0016"),h=a("1c1c"),q=a("66e5"),w=a("4074"),v=a("0170"),x=a("58a81"),P=a("f20b"),D=a("7f67"),k=a("eebe"),E=a.n(k),C=Object(d["a"])(c,i,s,!1,null,null,null);t["default"]=C.exports;E()(C,"components",{QPage:m["a"],QPageSticky:p["a"],QToolbar:u["a"],QToolbarTitle:g["a"],QBreadcrumbs:f["a"],QBreadcrumbsEl:b["a"],QBtn:y["a"],QIcon:_["a"],QList:h["a"],QItem:q["a"],QItemSection:w["a"],QItemLabel:v["a"],QBadge:x["a"],QBtnDropdown:P["a"]}),E()(C,"directives",{ClosePopup:D["a"]})}}]);