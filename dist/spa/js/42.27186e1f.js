(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[42],{1461:function(a,e,t){"use strict";t.r(e);var i=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("q-page",{style:a.isMobile?"":"padding-top: 70px"},[a.isMobile?a._e():t("q-page-sticky",{attrs:{expand:"",position:"top"}},[t("q-toolbar",{staticClass:"bg-white text-dark q-pa-none",attrs:{inset:""}},[t("q-toolbar-title",{staticClass:"text-dark col-auto q-pa-sm"},[a._v("\n        Tax\n      ")]),t("q-breadcrumbs",{staticClass:"text-grey col-auto",attrs:{gutter:"sm",separator:"/"}},[t("q-breadcrumbs-el",{attrs:{label:"Dashboard",to:{name:"Homepage"}}}),t("q-breadcrumbs-el",{attrs:{label:"Tax"}})],1)],1)],1),t("div",{staticClass:"container q-pa-lg"},[t("visi-grid",{ref:"facilityGrid",attrs:{title:"Tax","global-search":"",fullscreen:"",data:a.listing,columns:a.columns,loading:a.loading,onRequest:a.onRequest,pagination:a.pagination,rowKey:"id",classes:"table-theme",resetPagination:a.resetPagination,"choose-columns":"","show-refresh":""},scopedSlots:a._u([{key:"body-cell-status",fn:function(e){return[t("q-badge",{class:a.statues[e.row.status].class},[a._v("\n          "+a._s(a.statues[e.row.status].status)+"\n        ")])]}},{key:"body-cell-employee",fn:function(e){return[e.row.employee?t("div",{staticClass:"address-column"},[t("p",[a._v("\n            "+a._s(e.row.employee.first_name+" "+e.row.employee.last_name)+"\n          ")])]):[a._v("\n          "+a._s(a.noDataPlaceHolder)+"\n        ")]]}},{key:"body-cell-created_at",fn:function(e){return[a._v("\n        "+a._s(a._f("formatDate")(e.row.created_at,"H:mm A, MMM DD, YYYY"))+"\n      ")]}},{key:"body-cell-Action",fn:function(e){return[t("q-btn-dropdown",{staticClass:"action-dropdown ddropdown",attrs:{padding:"5px",flat:"",icon:"more_vert"}},[t("q-list",{staticClass:"dropdown-sm action-dropdown-box"},[t("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",to:{name:"Tax",params:{id:e.row.id}}}},[t("q-item-section",[t("q-item-label",[t("q-icon",{staticClass:"q-mr-xs",attrs:{name:"visibility",size:"15px"}}),a._v("\n                  View\n                ")],1)],1)],1),a.hasPermission("tax_edit")?t("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return a.updateDialogState({dialog:"TaxForm",val:!0,properties:e.row,refresh:!0})}}},[t("q-item-section",[t("q-item-label",[t("q-icon",{staticClass:"q-mr-xs",attrs:{name:"edit",size:"15px"}}),a._v("\n                  Edit\n                ")],1)],1)],1):a._e()],1)],1)]}}])})],1),a.hasPermission(["tax_edit"])?t("Form"):a._e(),t("Detail")],1)},s=[],n=t("ded3"),o=t.n(n),r=(t("e260"),t("d3b7"),t("e6cf"),t("3ca3"),t("ddb0"),t("4de4"),t("a79d"),t("2f62")),l={name:"PageTax",computed:o()(o()({},Object(r["b"])("tax",["pagination","listing"])),{},{localPagination:function(){return this.pagination}}),components:{Form:function(){return t.e(28).then(t.bind(null,"4cc2"))},Detail:function(){return t.e(27).then(t.bind(null,"0d49"))}},data:function(){return{loading:!1,refreshOrdersData:!this.$q.platform.is.mobile,columns:[{name:"tax_name",label:"Tax Name",field:"tax_name",align:"left",sortable:!0,isVisible:!0,isFixed:!0,detailLink:{name:"Tax"}},{name:"Action",label:"Action",align:"left",isVisible:!0,isFixed:!0},{name:"tax_per",label:"Tax (%)",field:"tax_per",align:"left",isVisible:!0},{name:"updated_at",label:"Last Updated On",align:"left",field:"updated_at",isVisible:!0,sortable:!0},{name:"employee",label:"Updated By",field:"employee",align:"left",isVisible:!0}]}},methods:{onRequest:function(a){var e=this;this.loading=!0;var t={"page[number]":a.pagination.page||1,"page[size]":a.pagination.rowsPerPage||this.localPagination.rowsPerPage,search:a.filter,pagination:1};a.pagination&&a.pagination.sortBy&&(t.Sorts=a.pagination.sortBy,t.SortsType=a.pagination.descending?"desc":"asc"),this.$store.dispatch("tax/getListing",t).then((function(i){i&&i.status&&(e.$store.commit("tax/SET_LISTING",{listing:i&&i.data&&i.data.data?i.data.data:[],refresh:!(!t||1!==t.Page)||e.refreshOrdersData}),e.$store.commit("tax/UPDATE_PAGINATION",{page:i.data.current_page,rowsPerPage:i.data.per_page,rowsNumber:i.data.total,hasNext:!!i.data.next_page_url,sortBy:a.pagination&&a.pagination.sortBy||null,descending:a.pagination&&a.pagination.descending||!1}))})).finally((function(){e.loading=!1}))},resetPagination:function(){this.$store.commit("tax/UPDATE_PAGINATION",this.defaultPagination)},confirmDelete:function(a){var e=this;this.visiConfirm('Are you sure you want to delete "'.concat(a.title,'" Tax')).onOk((function(){e.$store.dispatch("tax/deleteById",a.id).then((function(a){a.status?(e.$refs.facilityGrid&&e.$refs.facilityGrid.refresh(),e.showSuccess(a.message)):a.message&&e.showError(a.message)}))}))}},created:function(){this.$route.params.id&&this.updateDialogState({dialog:"TaxDetail",val:!0,properties:{id:this.$route.params.id}})},beforeRouteUpdate:function(a,e,t){a.params.id&&this.updateDialogState({dialog:"TaxDetail",val:!0,properties:{id:a.params.id}}),t()}},d=l,c=t("2877"),p=t("9989"),u=t("de5e"),m=t("65c6"),g=t("6ac5"),f=t("ead5"),b=t("079eb"),h=t("9c40"),x=t("0016"),_=t("58a81"),w=t("f20b"),y=t("1c1c"),q=t("66e5"),v=t("4074"),P=t("0170"),T=t("7f67"),D=t("eebe"),k=t.n(D),Q=Object(c["a"])(d,i,s,!1,null,null,null);e["default"]=Q.exports;k()(Q,"components",{QPage:p["a"],QPageSticky:u["a"],QToolbar:m["a"],QToolbarTitle:g["a"],QBreadcrumbs:f["a"],QBreadcrumbsEl:b["a"],QBtn:h["a"],QIcon:x["a"],QBadge:_["a"],QBtnDropdown:w["a"],QList:y["a"],QItem:q["a"],QItemSection:v["a"],QItemLabel:P["a"]}),k()(Q,"directives",{ClosePopup:T["a"]})}}]);